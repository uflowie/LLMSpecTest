<div class="container">
  <h1>Book Management</h1>
  <form (ngSubmit)="onSubmit()" novalidate>
    <div class="form-group">
      <label for="title">Book Title</label>
      <input type="text" id="title" [(ngModel)]="bookInput.title" name="title" data-testid="input-title" placeholder="Enter book title" (blur)="validateForm()" (input)="validateForm()">
      <div *ngIf="errors['title']" data-testid="error-title">
        <div *ngFor="let error of errors['title']">{{ error }}</div>
      </div>
    </div>
    <div class="form-group">
      <label for="author">Author Name</label>
      <input type="text" id="author" [(ngModel)]="bookInput.author" name="author" data-testid="input-author" placeholder="Enter author name" (blur)="validateForm()" (input)="validateForm()">
      <div *ngIf="errors['author']" data-testid="error-author">
        <div *ngFor="let error of errors['author']">{{ error }}</div>
      </div>
    </div>
    <div class="form-group">
      <label for="isbn">ISBN Number</label>
      <input type="text" id="isbn" [(ngModel)]="bookInput.isbn" name="isbn" data-testid="input-isbn" placeholder="Enter 13-digit ISBN number" (blur)="validateForm()" (input)="validateForm()">
      <div *ngIf="errors['isbn']" data-testid="error-isbn">
        <div *ngFor="let error of errors['isbn']">{{ error }}</div>
      </div>
    </div>
    <div class="form-group">
      <label for="publication_date">Publication Date</label>
      <input type="date" id="publication_date" [(ngModel)]="bookInput.publication_date" name="publication_date" data-testid="input-publication-date" (blur)="validateForm()" (input)="validateForm()">
      <div *ngIf="errors['publication_date']" data-testid="error-publication-date">
        <div *ngFor="let error of errors['publication_date']">{{ error }}</div>
      </div>
    </div>
    <div class="form-group">
      <label for="number_of_pages">Number of Pages</label>
      <input type="number" id="number_of_pages" [(ngModel)]="bookInput.number_of_pages" name="number_of_pages" data-testid="input-pages" placeholder="Enter number of pages" (blur)="validateForm()" (input)="validateForm()">
      <div *ngIf="errors['number_of_pages']" data-testid="error-pages">
        <div *ngFor="let error of errors['number_of_pages']">{{ error }}</div>
      </div>
    </div>
    <button type="submit" data-testid="btn-submit-book" [disabled]="!validateForm()">Add Book</button>
  </form>
  <div class="data-grid" data-testid="data-grid-books">
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Title</th>
          <th>Author</th>
          <th>ISBN</th>
          <th>Publication Date</th>
          <th>Pages</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let book of books" [attr.data-testid]="'data-grid-row-' + book.id">
          <td [attr.data-testid]="'data-grid-cell-id-' + book.id">{{ book.id }}</td>
          <td [attr.data-testid]="'data-grid-cell-title-' + book.id">{{ book.title }}</td>
          <td [attr.data-testid]="'data-grid-cell-author-' + book.id">{{ book.author }}</td>
          <td [attr.data-testid]="'data-grid-cell-isbn-' + book.id">{{ book.isbn }}</td>
          <td [attr.data-testid]="'data-grid-cell-publication-date-' + book.id">{{ book.publication_date }}</td>
          <td [attr.data-testid]="'data-grid-cell-pages-' + book.id">{{ book.number_of_pages }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
